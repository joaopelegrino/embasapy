[pytest]
asyncio_mode = auto
testpaths = tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Configurações de cobertura
addopts = 
    -v 
    --cov=app 
    --cov-report=term-missing 
    --cov-report=html 
    --cov-fail-under=90

# Metas de cobertura por módulo
[coverage:run]
source = app
branch = True

[coverage:report]
exclude_lines =
    pragma: no cover
    def __repr__
    raise NotImplementedError
    if __name__ == .__main__.:
    pass

# Metas específicas por módulo
[coverage:paths]
core = 
    app/core/
    app/core/config.py:95
    app/core/security.py:95
api = 
    app/api/
    app/api/routes/:90

[coverage:html]
directory = coverage_html
env =
    APP_ENV=test
    API_KEY=test_key
    SECRET_KEY=test_secret 